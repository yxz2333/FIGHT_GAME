# 3.x、4.x、5.x 版本更新策划

<br>

- [x] **3.0** : 选角选模式 **UI**、各个场景链接（ 转场 ）
- [x] **3.1** : **DebugMode** 开发者调试模式
- [x] **3.2** : **UI** 改善
- [x] **4.0** : **Party** 模式初步完成（ 大地图场景、背景、动态相机、人物配置 ）
- [ ] **4.1** : 新角色
- [ ] **4.2** : 各方面改进、平衡性调整
- [ ] **4.3** : 随机道具
- [ ] **4.4** : 特效
- [ ] **5.x** : 音效、新机制、代码优化

<br><br>

## Bug

- 人物有时候会出现在空中受击不闪 **Bug** ，感觉是状态转移的问题， 人物状态是 **shot**
- 受击没硬直的时候动画还是 **hit** ，学了 **shader** 的闪白再改一下<code>hit.gd</code>
- 跳跃机制有点 **bug**， 开个 **cnt** 计数，人物到地面则重置

<br>

## **4.x 更新策划**

### **改进**

- [x] 加载时禁用输入
- [x] **UI** 加上 **Px**
- [ ] 选人界面的返回键
- [x] 人物攻击取消加 **红圈特效**
- [ ] 多手柄输入支持
- [ ] 每把游戏结束，返回之前的选角界面
  - 尝试将选举界面场景放在新场景下，隐藏并暂停，游戏结束再重设为父节点

<br>

### **新角色**

- **Musashi**
  - **技能：**
    - [x] 防御：
      - 键位：'u','4','Y'
      - 消耗 **20** 怒气
      - 怒气足够的情况下可以连续防御
      - 当身：打出多段攻击，伤害高
      - 反弹飞行道具：回复 **同子弹伤害相对应** 的怒气，且可在防御时间内反弹多个子弹
    - [x] 蓄力斩 和 闪避：
      - 键位：'j','1','X'
      - 主动取消键位：'l','3','B'
      - 主动取消硬直消耗 **5** 怒气
      - 闪避：
        - 短按
        - 快速位移，但是有硬直
        - 刚好在敌人攻击的时候闪避，回复 **30** 怒气
      - 蓄力斩：
        - 长按
        - 蓄力完成击飞力度大
        - 攻击 **背后** 敌人

<br>

### **角色改进**

- **Marston**
  - [ ] **Marston** 的子弹消耗 **50** 怒气回满子弹
  - [ ] **Marston** 多段攻击优化

<br>

- **Namka**
  - [x] **Namka** 的攻击取消改成消耗 **15** 怒气

<br>

- **CharacterManu**
  - [ ] 每当状态回复好时，人物脚下出现文字标识提醒

<br>

### **新机制**

- [ ] 重生出生点
- [ ] 开场倒计时 <code> 3 2 1 FIGHT </code>
- [ ] 角色大招（仅 **Party** 模式）：
  - 隐藏触发机制：跳 100 下......
  - 使用 **Party** 模式各种道具可以触发
  - 大招秒杀
  - 各种大招动画：
    - 大招动画下背景变白人物变黑
- [ ] 狂热 **FZ** 状态（仅 **solo** 模式）:
  - 长期被压制（或者长期压制）对手，有概率进入 <u>怒气值快速提升</u> 和 <u>**Break** 值快速恢复</u> 的 **狂热状态**
  - 可以记录长期被压制（或者长期压制）的次数，算概率进入狂热状态
  - 一条命一次
- [ ] **DSA**（仅 **solo** 模式）:
  - 消耗 **200** 怒气，持续时间只比 **SA** 长一点，但各个人物招式发生变化
    - [ ] **Marston** 无限子弹
    - [ ] **Namka** 子弹变大集中敌人造成麻痹但射速变慢
    - [ ] **Musashi** 蓄力变快
  - **DSA** 只能开一次

<br>

### **改机制**

- [ ] **Solo** 每人 **3** 条命，只继承 **Break**，怒气值减少 **100**
- [ ] 怒气值最大值改为 **200**
- [ ] 消耗 **100** 开 **SA**
- [ ] 消耗 **200** 开 **有大招的 SA**
- [x] **Break** 改为按时间刷新

<br>

### **新模式**

- **Party**
  - 随机道具：
    - [ ] 增益道具：减少百分比、枪补子弹 **Marston** ，枪充能 **Namka** ，短时间内无限闪避 **Musashi** _。此道具刷新频率较低。_
    - [ ] 幸运方块：包含所有道具，并有特殊道具：一拿即死、一拿即赢、一拿即怒气值满。_此道具刷新频率较高。_
    - [x] 大地图
    - [x] 动态相机
    - [x] 对应的新选角界面
    - [x] 每位角色对应颜色边框
    - [ ] （彩蛋）狂按两个键的无限跳，添加只有极短的时间的 **timer** 作为按键间隔

<br>

## **更多想法**

- [ ] 自选战斗 **bgm**
- [ ] 更新 **5.0** 版本的时候看看能否实现
  - **Music** 模式（音游模式）: ——作为 **6.0** 版本更新
    - 跟着节拍打出的伤害会变高

<br><br>

## **（已完成）3.x 更新策划**

### **人物选择界面 UI 设计**

- [x] 选中角色时，相应角色从角色框中掉出，键位匹配，隐藏状态栏
- [x] 角色框进入退出动画
- [x] 生成的角色离开平台则说明重选，鼠标指针回归原来的 **back** 位置
- [x] 角色出屏幕特效（包括上下的）
- [x] 修改在角色选择界面 **CharacterSelect** 的 **类 Scene** 属性，让角色在此场景下作为试用不出 **bug**，且隐藏角色面板
- [x] 改善角色框动效
- [x] <code>Please select your character</code> 转场
- [x] 选完角色时，对应左右两边贴上所选的角色，**a 通道** 调淡一些
- [x] _不同配色太难做了，只能角色整 **P_Label** 了_ （~~用 **Shader** 实现角色的多种配色，这样就可重复使用一个角色~~）
- [x] 都选完角色时，出现 **start** 标识，按 **enter** 开始对战
- [x] 按下 **enter** 更改 **Scene** 的 **actions** 属性，编号对应按键
- [x] 各种转场，实现转场类 **Transitons**
- [x] 实现角色按键配置

<br>

### UI 改善

- [x] **UI** 位置适配 _（ 人物名字、百分比 ）_
- [x] **Break 图标** *（ *改机制* ）*
- [x] **GameOver** 界面改善
- [x] 角色面板：
  - [x] 角色 **Break UI** ：倒计时 *（ *改机制* ）*
  - [x] 角色持枪状态 **UI** ：非持枪模式则图标 **a 通道** 降低
  - [x] 人物碰到面板则变透明

<br>

### 人物 debug 脚本

- [x] 可以在线修改角色属性的 测试 GUI

<br><br>
